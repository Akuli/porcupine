dont_recurse_inside:
  - string  # TODO: recurse inside f-strings
  # TODO: distinguish between variables and attributes?
  # Can't just add "attribute" to dont_recurse_inside because then the object
  # whose attribute it is won't highlight, e.g. open("foo", "rb").read()

token_mapping:
  comment: Token.Comment

  # TODO: which of these are needed?
  integer: Token.Literal.Number.Integer
  float: Token.Literal.Number.Float
  string: Token.Literal.String

  'true': Token.Keyword.Constant
  'false': Token.Keyword.Constant
  none: Token.Keyword.Constant
  
  ellipsis: Token.Name.Builtin.Pseudo
  def_name: Token.Name.Function
  class_name: Token.Name.Class

  # Keywords
  as: Token.Keyword
  assert: Token.Keyword
  async: Token.Keyword
  await: Token.Keyword
  break: Token.Keyword
  case: Token.Keyword
  class: Token.Keyword
  continue: Token.Keyword
  def: Token.Keyword
  del: Token.Keyword
  elif: Token.Keyword
  else: Token.Keyword
  except: Token.Keyword
  finally: Token.Keyword
  for: Token.Keyword
  from: Token.Keyword
  global: Token.Keyword
  if: Token.Keyword
  import: Token.Keyword
  lambda: Token.Keyword
  match: Token.Keyword
  nonlocal: Token.Keyword
  pass: Token.Keyword
  raise: Token.Keyword
  return: Token.Keyword
  try: Token.Keyword
  while: Token.Keyword
  with: Token.Keyword
  yield: Token.Keyword

  # Operators
  '!=': Token.Operator
  '==': Token.Operator
  '<': Token.Operator
  '>': Token.Operator
  '<=': Token.Operator
  '>=': Token.Operator
  '+=': Token.Operator
  '-=': Token.Operator
  '*=': Token.Operator
  '/=': Token.Operator
  '@=': Token.Operator
  '//=': Token.Operator
  '%=': Token.Operator
  '**=': Token.Operator
  '<<=': Token.Operator
  '>>=': Token.Operator
  '&=': Token.Operator
  '^=': Token.Operator
  '|=': Token.Operator
  '+': Token.Operator
  '-': Token.Operator
  '*': Token.Operator
  '/': Token.Operator
  '@': Token.Operator
  '//': Token.Operator
  '%': Token.Operator
  '**': Token.Operator
  '<<': Token.Operator
  '>>': Token.Operator
  '&': Token.Operator
  '^': Token.Operator
  '|': Token.Operator
  '~': Token.Operator
  '=': Token.Operator
  ':=': Token.Operator
  and: Token.Operator.Word
  in: Token.Operator.Word
  is: Token.Operator.Word
  not: Token.Operator.Word
  or: Token.Operator.Word

  # Punctuation
  '(': Token.Punctuation
  ')': Token.Punctuation
  '[': Token.Punctuation
  ']': Token.Punctuation
  '{': Token.Punctuation
  '}': Token.Punctuation
  '.': Token.Punctuation
  ',': Token.Punctuation
  ':': Token.Punctuation
  ';': Token.Punctuation
  '->': Token.Punctuation  # Hax

  identifier:
    # Exceptions
    ArithmeticError: Token.Name.Exception
    AssertionError: Token.Name.Exception
    AttributeError: Token.Name.Exception
    BaseException: Token.Name.Builtin
    BlockingIOError: Token.Name.Exception
    BrokenPipeError: Token.Name.Exception
    BufferError: Token.Name.Exception
    BytesWarning: Token.Name.Builtin
    ChildProcessError: Token.Name.Exception
    ConnectionAbortedError: Token.Name.Exception
    ConnectionError: Token.Name.Exception
    ConnectionRefusedError: Token.Name.Exception
    ConnectionResetError: Token.Name.Exception
    DeprecationWarning: Token.Name.Builtin
    EOFError: Token.Name.Exception
    EncodingWarning: Token.Name.Builtin
    EnvironmentError: Token.Name.Exception
    Exception: Token.Name.Builtin
    FileExistsError: Token.Name.Exception
    FileNotFoundError: Token.Name.Exception
    FloatingPointError: Token.Name.Exception
    FutureWarning: Token.Name.Builtin
    GeneratorExit: Token.Name.Builtin
    IOError: Token.Name.Exception
    ImportError: Token.Name.Exception
    ImportWarning: Token.Name.Builtin
    IndentationError: Token.Name.Exception
    IndexError: Token.Name.Exception
    InterruptedError: Token.Name.Exception
    IsADirectoryError: Token.Name.Exception
    KeyError: Token.Name.Exception
    KeyboardInterrupt: Token.Name.Builtin
    LookupError: Token.Name.Exception
    MemoryError: Token.Name.Exception
    ModuleNotFoundError: Token.Name.Exception
    NameError: Token.Name.Exception
    NotADirectoryError: Token.Name.Exception
    NotImplementedError: Token.Name.Exception
    OSError: Token.Name.Exception
    OverflowError: Token.Name.Exception
    PendingDeprecationWarning: Token.Name.Builtin
    PermissionError: Token.Name.Exception
    ProcessLookupError: Token.Name.Exception
    RecursionError: Token.Name.Exception
    ReferenceError: Token.Name.Exception
    ResourceWarning: Token.Name.Builtin
    RuntimeError: Token.Name.Exception
    RuntimeWarning: Token.Name.Builtin
    StopAsyncIteration: Token.Name.Builtin
    StopIteration: Token.Name.Builtin
    SyntaxError: Token.Name.Exception
    SyntaxWarning: Token.Name.Builtin
    SystemError: Token.Name.Exception
    SystemExit: Token.Name.Builtin
    TabError: Token.Name.Exception
    TimeoutError: Token.Name.Exception
    TypeError: Token.Name.Exception
    UnboundLocalError: Token.Name.Exception
    UnicodeDecodeError: Token.Name.Exception
    UnicodeEncodeError: Token.Name.Exception
    UnicodeError: Token.Name.Exception
    UnicodeTranslateError: Token.Name.Exception
    ValueError: Token.Name.Exception
    ZeroDivisionError: Token.Name.Exception
    UnicodeWarning: Token.Name.Builtin
    UserWarning: Token.Name.Builtin
    Warning: Token.Name.Builtin
    
    # Builtins
    'True': Token.Name.Builtin
    'False': Token.Name.Builtin
    None: Token.Name.Builtin
    __import__: Token.Name.Builtin
    abs: Token.Name.Builtin
    all: Token.Name.Builtin
    any: Token.Name.Builtin
    ascii: Token.Name.Builtin
    bin: Token.Name.Builtin
    bool: Token.Name.Builtin
    breakpoint: Token.Name.Builtin
    bytearray: Token.Name.Builtin
    bytes: Token.Name.Builtin
    callable: Token.Name.Builtin
    chr: Token.Name.Builtin
    classmethod: Token.Name.Builtin
    compile: Token.Name.Builtin
    complex: Token.Name.Builtin
    copyright: Token.Name.Builtin
    credits: Token.Name.Builtin
    delattr: Token.Name.Builtin
    dict: Token.Name.Builtin
    dir: Token.Name.Builtin
    divmod: Token.Name.Builtin
    enumerate: Token.Name.Builtin
    eval: Token.Name.Builtin
    exec: Token.Name.Builtin
    exit: Token.Name.Builtin
    filter: Token.Name.Builtin
    float: Token.Name.Builtin
    format: Token.Name.Builtin
    frozenset: Token.Name.Builtin
    getattr: Token.Name.Builtin
    globals: Token.Name.Builtin
    hasattr: Token.Name.Builtin
    hash: Token.Name.Builtin
    help: Token.Name.Builtin
    hex: Token.Name.Builtin
    id: Token.Name.Builtin
    input: Token.Name.Builtin
    int: Token.Name.Builtin
    isinstance: Token.Name.Builtin
    issubclass: Token.Name.Builtin
    iter: Token.Name.Builtin
    len: Token.Name.Builtin
    license: Token.Name.Builtin
    list: Token.Name.Builtin
    locals: Token.Name.Builtin
    map: Token.Name.Builtin
    max: Token.Name.Builtin
    memoryview: Token.Name.Builtin
    min: Token.Name.Builtin
    next: Token.Name.Builtin
    object: Token.Name.Builtin
    oct: Token.Name.Builtin
    open: Token.Name.Builtin
    ord: Token.Name.Builtin
    pow: Token.Name.Builtin
    print: Token.Name.Builtin
    property: Token.Name.Builtin
    quit: Token.Name.Builtin
    range: Token.Name.Builtin
    repr: Token.Name.Builtin
    reversed: Token.Name.Builtin
    round: Token.Name.Builtin
    set: Token.Name.Builtin
    setattr: Token.Name.Builtin
    slice: Token.Name.Builtin
    sorted: Token.Name.Builtin
    staticmethod: Token.Name.Builtin
    str: Token.Name.Builtin
    sum: Token.Name.Builtin
    super: Token.Name.Builtin
    tuple: Token.Name.Builtin
    type: Token.Name.Builtin
    vars: Token.Name.Builtin
    zip: Token.Name.Builtin

    # builtin.Pseudo
    self: Token.Name.Builtin.Pseudo
    cls: Token.Name.Builtin.Pseudo
    Ellipsis: Token.Name.Builtin.Pseudo
    NotImplemented: Token.Name.Builtin.Pseudo

    # Magic variables
    __annotations__: Token.Name.Variable.Magic
    __bases__: Token.Name.Variable.Magic
    __class__: Token.Name.Variable.Magic
    __closure__: Token.Name.Variable.Magic
    __code__: Token.Name.Variable.Magic
    __debug__: Token.Name.Variable.Magic
    __defaults__: Token.Name.Variable.Magic
    __dict__: Token.Name.Variable.Magic
    __doc__: Token.Name.Variable.Magic
    __file__: Token.Name.Variable.Magic
    __func__: Token.Name.Variable.Magic
    __globals__: Token.Name.Variable.Magic
    __kwdefaults__: Token.Name.Variable.Magic
    __loader__: Token.Name.Variable.Magic
    __module__: Token.Name.Variable.Magic
    __mro__: Token.Name.Variable.Magic
    __name__: Token.Name.Variable.Magic
    __objclass__: Token.Name.Variable.Magic
    __package__: Token.Name.Variable.Magic
    __path__: Token.Name.Variable.Magic
    __qualname__: Token.Name.Variable.Magic
    __self__: Token.Name.Variable.Magic
    __slots__: Token.Name.Variable.Magic
    __spec__: Token.Name.Variable.Magic
    __weakref__: Token.Name.Variable.Magic

    # Magic funcs
    __abs__: Token.Name.Function.Magic
    __add__: Token.Name.Function.Magic
    __aenter__: Token.Name.Function.Magic
    __aexit__: Token.Name.Function.Magic
    __aiter__: Token.Name.Function.Magic
    __and__: Token.Name.Function.Magic
    __anext__: Token.Name.Function.Magic
    __await__: Token.Name.Function.Magic
    __bool__: Token.Name.Function.Magic
    __bytes__: Token.Name.Function.Magic
    __call__: Token.Name.Function.Magic
    __complex__: Token.Name.Function.Magic
    __contains__: Token.Name.Function.Magic
    __del__: Token.Name.Function.Magic
    __delattr__: Token.Name.Function.Magic
    __delete__: Token.Name.Function.Magic
    __delitem__: Token.Name.Function.Magic
    __dir__: Token.Name.Function.Magic
    __divmod__: Token.Name.Function.Magic
    __enter__: Token.Name.Function.Magic
    __eq__: Token.Name.Function.Magic
    __exit__: Token.Name.Function.Magic
    __float__: Token.Name.Function.Magic
    __floordiv__: Token.Name.Function.Magic
    __format__: Token.Name.Function.Magic
    __ge__: Token.Name.Function.Magic
    __get__: Token.Name.Function.Magic
    __getattr__: Token.Name.Function.Magic
    __getattribute__: Token.Name.Function.Magic
    __getitem__: Token.Name.Function.Magic
    __gt__: Token.Name.Function.Magic
    __hash__: Token.Name.Function.Magic
    __iadd__: Token.Name.Function.Magic
    __iand__: Token.Name.Function.Magic
    __ifloordiv__: Token.Name.Function.Magic
    __ilshift__: Token.Name.Function.Magic
    __imatmul__: Token.Name.Function.Magic
    __imod__: Token.Name.Function.Magic
    __imul__: Token.Name.Function.Magic
    __index__: Token.Name.Function.Magic
    __init__: Token.Name.Function.Magic
    __instancecheck__: Token.Name.Function.Magic
    __int__: Token.Name.Function.Magic
    __invert__: Token.Name.Function.Magic
    __ior__: Token.Name.Function.Magic
    __ipow__: Token.Name.Function.Magic
    __irshift__: Token.Name.Function.Magic
    __isub__: Token.Name.Function.Magic
    __iter__: Token.Name.Function.Magic
    __itruediv__: Token.Name.Function.Magic
    __ixor__: Token.Name.Function.Magic
    __le__: Token.Name.Function.Magic
    __len__: Token.Name.Function.Magic
    __length_hint__: Token.Name.Function.Magic
    __lshift__: Token.Name.Function.Magic
    __lt__: Token.Name.Function.Magic
    __matmul__: Token.Name.Function.Magic
    __missing__: Token.Name.Function.Magic
    __mod__: Token.Name.Function.Magic
    __mul__: Token.Name.Function.Magic
    __ne__: Token.Name.Function.Magic
    __neg__: Token.Name.Function.Magic
    __new__: Token.Name.Function.Magic
    __next__: Token.Name.Function.Magic
    __or__: Token.Name.Function.Magic
    __pos__: Token.Name.Function.Magic
    __pow__: Token.Name.Function.Magic
    __prepare__: Token.Name.Function.Magic
    __radd__: Token.Name.Function.Magic
    __rand__: Token.Name.Function.Magic
    __rdivmod__: Token.Name.Function.Magic
    __repr__: Token.Name.Function.Magic
    __reversed__: Token.Name.Function.Magic
    __rfloordiv__: Token.Name.Function.Magic
    __rlshift__: Token.Name.Function.Magic
    __rmatmul__: Token.Name.Function.Magic
    __rmod__: Token.Name.Function.Magic
    __rmul__: Token.Name.Function.Magic
    __ror__: Token.Name.Function.Magic
    __round__: Token.Name.Function.Magic
    __rpow__: Token.Name.Function.Magic
    __rrshift__: Token.Name.Function.Magic
    __rshift__: Token.Name.Function.Magic
    __rsub__: Token.Name.Function.Magic
    __rtruediv__: Token.Name.Function.Magic
    __rxor__: Token.Name.Function.Magic
    __set__: Token.Name.Function.Magic
    __setattr__: Token.Name.Function.Magic
    __setitem__: Token.Name.Function.Magic
    __str__: Token.Name.Function.Magic
    __sub__: Token.Name.Function.Magic
    __subclasscheck__: Token.Name.Function.Magic
    __truediv__: Token.Name.Function.Magic
    __xor__: Token.Name.Function.Magic
